// Профессиональные интерпретации результатов
// ⚠️ Важно: это скрининговый инструмент для самодиагностики, НЕ медицинский диагноз

export interface Interpretation {
  title: string;
  description: string;
  recommendations: string[];
  therapyQuestions: string[];
  showBookingButton?: boolean; // Показывать ли кнопку записи к психологу
  psychologistNote?: string; // Ненавязчивая заметка о возможности консультации
}

export const interpretations = {
  // ============= PHQ-9 =============
  PHQ9: {
    minimal: {
      title: 'По шкале депрессии — всё в пределах нормы',
      description: 'Скрининг PHQ-9 показывает минимальную выраженность депрессивных симптомов. Ваше настроение и интерес к жизни сохранены. Это хороший результат.',
      recommendations: [
        'Продолжайте заботиться о режиме сна и активности',
        'Уделяйте время занятиям, которые приносят удовольствие',
        'Обращайте внимание на изменения настроения, если они появятся'
      ],
      therapyQuestions: [],
      showBookingButton: true,
      psychologistNote: 'Даже если с настроением всё в порядке, у вас могут быть другие темы, которые хотелось бы обсудить: отношения, самооценка, жизненные выборы. Психолог может быть полезен не только в кризисе.'
    },
    mild: {
      title: 'Лёгкое снижение настроения',
      description: 'Скрининг показывает лёгкую выраженность депрессивных симптомов. Вы замечаете некоторое снижение настроения или интереса к делам, но это пока не сильно мешает повседневной жизни.',
      recommendations: [
        'Структурируйте день: время на работу, отдых и приятное',
        'Даже небольшая активность (прогулка, хобби) может помочь',
        'Наблюдайте за динамикой — если симптомы усиливаются, стоит обратиться за поддержкой'
      ],
      therapyQuestions: [
        'Когда началось снижение настроения?',
        'Что помогает чувствовать себя немного лучше?',
        'Как это влияет на работу и отношения?'
      ],
      showBookingButton: true,
      psychologistNote: 'На этом этапе можно справиться самостоятельно, но если хотите разобраться глубже — с чем связано снижение настроения и как с этим работать — психолог может помочь структурировать мысли и найти ресурсы.'
    },
    moderate: {
      title: 'Умеренная выраженность депрессивных симптомов',
      description: 'Скрининг показывает умеренную выраженность: снижение интереса и энергии, возможны трудности со сном, концентрацией. Это влияет на повседневную жизнь. Стоит обратиться к специалисту для профессиональной оценки.',
      recommendations: [
        'Рекомендуется консультация психотерапевта или клинического психолога',
        'Ведите дневник настроения — это поможет отследить паттерны',
        'Посильная физическая активность (даже 15-минутная прогулка) может облегчить состояние'
      ],
      therapyQuestions: [
        'Когда вы начали замечать снижение настроения и энергии?',
        'Что помогает чувствовать себя лучше, даже ненадолго?',
        'Как это влияет на работу, отношения, самоощущение?',
        'Были ли раньше похожие периоды?'
      ],
      showBookingButton: true,
      psychologistNote: 'На этом уровне психологическая поддержка может быть полезна: работа с мыслями, поведением, поиск ресурсов. Если симптомы длятся долго или усиливаются, лучше обратиться к психотерапевту.'
    },
    severe: {
      title: 'Значительная выраженность депрессивных симптомов',
      description: 'Скрининг показывает значительную выраженность депрессивных симптомов, которые серьёзно влияют на качество жизни. На этом уровне необходима консультация врача-психотерапевта или психиатра.',
      recommendations: [
        '⚠️ Обратитесь к врачу-психотерапевту или психиатру для профессиональной диагностики и лечения',
        'При таком уровне симптомов часто эффективен комбинированный подход: психотерапия + медикаментозная поддержка',
        'Не оставайтесь с этим наедине — говорите с близкими, обращайтесь за помощью'
      ],
      therapyQuestions: [
        'Как давно вы находитесь в таком состоянии?',
        'Были ли подобные эпизоды раньше? Что тогда помогло?',
        'Есть ли мысли о нежелании жить? (важно обсудить)',
        'Как вы справляетесь сейчас? Кто может поддержать?',
        'Что изменилось в жизни перед началом симптомов?'
      ],
      showBookingButton: false,
      psychologistNote: 'При таком уровне симптомов работа только с психологом недостаточна. Вам нужна консультация врача-психотерапевта или психиатра, который может назначить медикаментозное лечение.'
    }
  },

  // ============= GAD-7 =============
  GAD7: {
    minimal: {
      title: 'По шкале тревоги — всё в пределах нормы',
      description: 'Скрининг GAD-7 показывает минимальную выраженность тревожных симптомов. Вы справляетесь с беспокойством и контролируете его. Это хороший результат.',
      recommendations: [
        'Продолжайте практиковать то, что помогает вам оставаться в балансе',
        'Поддерживайте здоровый образ жизни и режим сна',
        'Обращайте внимание на ранние сигналы тревоги, если они появятся'
      ],
      therapyQuestions: [],
      showBookingButton: true,
      psychologistNote: 'Даже если с тревогой всё в порядке, психолог может быть полезен для работы с другими темами: уверенность, границы, отношения, жизненные решения.'
    },
    mild: {
      title: 'Лёгкая тревожность',
      description: 'Скрининг показывает лёгкую выраженность тревожных симптомов. Тревога присутствует периодически, но пока не мешает серьёзно повседневной жизни.',
      recommendations: [
        'Попробуйте техники заземления (5-4-3-2-1: назовите 5 вещей, которые видите, 4 — которые слышите, 3 — которые чувствуете...)',
        'Практикуйте дыхательные упражнения (4-7-8: вдох на 4, задержка на 7, выдох на 8)',
        'Ведите дневник тревоги: отмечайте, что её вызывает и как справляетесь'
      ],
      therapyQuestions: [
        'О чём вы чаще всего беспокоитесь?',
        'Как тревога проявляется в теле?',
        'Что помогает успокоиться?'
      ],
      showBookingButton: true,
      psychologistNote: 'С такой тревогой можно справляться самостоятельно, но если хотите освоить эффективные техники управления тревогой или разобраться, откуда она берётся — психолог может помочь.'
    },
    moderate: {
      title: 'Умеренная выраженность тревожных симптомов',
      description: 'Скрининг показывает умеренную выраженность тревоги: беспокойство трудно контролировать, есть напряжение, раздражительность. Это влияет на повседневную жизнь. Стоит обратиться к специалисту.',
      recommendations: [
        'Рекомендуется консультация психотерапевта или клинического психолога, работающего с тревогой',
        'КПТ-техники (когнитивно-поведенческая терапия) показывают хорошую эффективность при тревоге',
        'Ведите дневник триггеров тревоги — это поможет лучше понять паттерны'
      ],
      therapyQuestions: [
        'О чём вы беспокоитесь чаще всего?',
        'Как тревога проявляется физически?',
        'Что вы избегаете из-за тревоги?',
        'Были ли панические атаки или сильные приступы?'
      ],
      showBookingButton: true,
      psychologistNote: 'На этом уровне психологическая работа с тревогой может быть очень эффективна: освоение техник саморегуляции, работа с убеждениями, которые подпитывают тревогу.'
    },
    severe: {
      title: 'Значительная выраженность тревожных симптомов',
      description: 'Скрининг показывает значительную выраженность тревоги, которая серьёзно влияет на качество жизни, работу и отношения. На этом уровне необходима консультация врача-психотерапевта.',
      recommendations: [
        '⚠️ Обратитесь к врачу-психотерапевту для работы с тревожным расстройством',
        'КПТ (когнитивно-поведенческая терапия) показала высокую эффективность при тревожных расстройствах',
        'При необходимости врач может назначить медикаментозную поддержку для облегчения симптомов'
      ],
      therapyQuestions: [
        'Как давно тревога настолько выражена?',
        'Какие ситуации избегаете? Как это влияет на жизнь?',
        'Есть ли паника, избегание, компульсии?',
        'Как вы справляетесь сейчас? Что помогает?',
        'Были ли травматические события в прошлом?'
      ],
      showBookingButton: false,
      psychologistNote: 'При таком уровне тревоги рекомендуется консультация врача-психотерапевта, который может оценить необходимость медикаментозной поддержки наряду с психотерапией.'
    }
  },

  // ============= Общие комбинации =============
  combined: {
    bothHigh: {
      title: 'Значительная выраженность депрессии и тревоги одновременно',
      description: 'Скрининг показывает высокую выраженность как депрессивных, так и тревожных симптомов. Это частое сочетание, которое серьёзно влияет на качество жизни. Необходима консультация врача-психотерапевта или психиатра.',
      recommendations: [
        '⚠️ Обратитесь к врачу-психотерапевту или психиатру в ближайшее время',
        'При таком сочетании симптомов комбинированный подход (психотерапия + медикаменты) часто наиболее эффективен',
        'Не откладывайте обращение — без профессиональной поддержки состояние может ухудшаться'
      ],
      therapyQuestions: [
        'Что началось раньше — тревога или снижение настроения?',
        'Как одно влияет на другое?',
        'Что в жизни сейчас вызывает наибольшую нагрузку?',
        'Есть ли поддержка близких?'
      ],
      showBookingButton: false,
      psychologistNote: 'При сочетании выраженной депрессии и тревоги работа только с психологом недостаточна. Вам нужна консультация врача-психотерапевта или психиатра.'
    }
  }
};

// Функция определения уровня по баллам
export function getSeverityLevel(score: number, maxScore: number): 'minimal' | 'mild' | 'moderate' | 'severe' {
  const percent = (score / maxScore) * 100;
  
  if (percent < 25) return 'minimal';
  if (percent < 50) return 'mild';
  if (percent < 75) return 'moderate';
  return 'severe';
}

// PHQ-9 специфичные пороги (клинически валидированные)
export function getPHQ9Level(score: number): 'minimal' | 'mild' | 'moderate' | 'severe' {
  if (score <= 4) return 'minimal';
  if (score <= 9) return 'mild';
  if (score <= 14) return 'moderate';
  return 'severe';
}

// GAD-7 специфичные пороги (клинически валидированные)
export function getGAD7Level(score: number): 'minimal' | 'mild' | 'moderate' | 'severe' {
  if (score <= 4) return 'minimal';
  if (score <= 9) return 'mild';
  if (score <= 14) return 'moderate';
  return 'severe';
}
