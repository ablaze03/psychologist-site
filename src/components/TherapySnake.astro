---
// Используем зелёный цвет из палитры сайта (aquaSoft)
const stroke = "#C7D7C9"; // aquaSoft - зелёный цвет сайта
const dot = "rgba(199, 215, 201, 0.6)"; // aquaSoft с прозрачностью для точек
const connectorColor = "rgba(199, 215, 201, 0.4)"; // Цвет линий-соединителей

// Горизонтальная таймлайн-линия
// viewBox: 0 0 1400 420
// Линия проходит горизонтально по центру
const lineY = 210; // Y координата горизонтальной линии (центр viewBox)
const lineStartX = 100;
const lineEndX = 1300;

// Координаты точек на линии (синхронизированы с позициями шагов)
// Позиции шагов в процентах от контейнера: x: 12, 33, 56, 76, 55, 84
// Переводим проценты в координаты viewBox: 12% от 1400 = 168
const points = [
  { x: 168, y: lineY },  // 01 - 12% x, top
  { x: 462, y: lineY },  // 02 - 33% x, top
  { x: 784, y: lineY },  // 03 - 56% x, top
  { x: 1064, y: lineY }, // 04 - 76% x, bottom
  { x: 770, y: lineY },  // 05 - 55% x, bottom
  { x: 1176, y: lineY }, // 06 - 84% x, bottom
];

// Координаты кружочков с номерами
// Для верхних шагов (01-03): кружочки выше линии
// Для нижних шагов (04-06): кружочки ниже линии
const badgePositions = [
  { x: 168, y: 80 },   // 01 - top (выше линии)
  { x: 462, y: 80 },   // 02 - top (выше линии)
  { x: 784, y: 80 },   // 03 - top (выше линии)
  { x: 1064, y: 340 }, // 04 - bottom (ниже линии)
  { x: 770, y: 340 },  // 05 - bottom (ниже линии)
  { x: 1176, y: 340 }, // 06 - bottom (ниже линии)
];
---

<svg viewBox="0 0 1400 420" xmlns="http://www.w3.org/2000/svg" class="snakeSvg" aria-label="Путь терапии">
  <defs>
    <marker id="arrow" markerWidth="14" markerHeight="14" refX="10" refY="7" orient="auto">
      <path d="M0,0 L14,7 L0,14 Z" fill={stroke} />
    </marker>
    <filter id="softShadow">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2"/>
      <feOffset dx="0" dy="1" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Горизонтальная таймлайн-линия -->
  <line
    x1={lineStartX}
    y1={lineY}
    x2={lineEndX}
    y2={lineY}
    stroke={stroke}
    stroke-width="6"
    stroke-linecap="round"
    marker-end="url(#arrow)"
    class="snakePath"
    filter="url(#softShadow)"
  />

  <!-- Точки на линии точно в позициях шагов -->
  <g fill={dot} stroke={dot}>
    {points.map((p) => (
      <circle cx={p.x} cy={p.y} r="7"/>
    ))}
  </g>

  <!-- Линии-соединители от точек на линии к кружочкам с номерами -->
  <g stroke={connectorColor} stroke-width="2" stroke-dasharray="4,4" fill="none" opacity="0.6">
    {points.map((p, i) => {
      const badge = badgePositions[i];
      return (
        <line x1={p.x} y1={p.y} x2={badge.x} y2={badge.y} />
      );
    })}
  </g>
</svg>

<style>
  .snakeSvg { 
    width: 100%; 
    height: auto; 
    display: block; 
  }
  .snakePath { 
    opacity: 0.95; 
  }
</style>
